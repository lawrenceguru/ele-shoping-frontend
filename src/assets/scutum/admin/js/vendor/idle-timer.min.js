!function(c){c.idleTimer=function(e,n){"object"==typeof e?(u=e,e=null):"number"==typeof e&&(u={timeout:e},e=null),n=n||document;function t(e){var i=c.data(n,"idleTimerObj")||{};i.idle=!i.idle,i.olddate=+new Date;var t=c.Event((i.idle?"idle":"active")+".idleTimer");c(n).trigger(t,[n,c.extend({},i),e])}function i(e){var i=c.data(n,"idleTimerObj")||{};if(("storage"!==e.type||e.originalEvent.key===i.timerSyncId)&&null==i.remaining){if("mousemove"===e.type){if(e.pageX===i.pageX&&e.pageY===i.pageY)return;if(void 0===e.pageX&&void 0===e.pageY)return;if(+new Date-i.olddate<200)return}clearTimeout(i.tId),i.idle&&t(e),i.lastActive=+new Date,i.pageX=e.pageX,i.pageY=e.pageY,"storage"!==e.type&&i.timerSyncId&&"undefined"!=typeof localStorage&&localStorage.setItem(i.timerSyncId,i.lastActive),i.tId=setTimeout(t,i.timeout)}}function r(){var e=c.data(n,"idleTimerObj")||{};e.idle=e.idleBackup,e.olddate=+new Date,e.lastActive=e.olddate,e.remaining=null,clearTimeout(e.tId),e.idle||(e.tId=setTimeout(t,e.timeout))}var l,a,d,u=c.extend({idle:!1,timeout:3e4,events:"mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},u),o=c(n),m=o.data("idleTimerObj")||{};if(null===e&&void 0!==m.idle)return r(),o;if(null!==e){if(null!==e&&void 0===m.idle)return!1;if("destroy"===e)return d=c.data(n,"idleTimerObj")||{},clearTimeout(d.tId),o.removeData("idleTimerObj"),o.off("._idleTimer"),o;if("pause"===e)return null==(a=c.data(n,"idleTimerObj")||{}).remaining&&(a.remaining=a.timeout-(+new Date-a.olddate),clearTimeout(a.tId)),o;if("resume"===e)return null!=(l=c.data(n,"idleTimerObj")||{}).remaining&&(l.idle||(l.tId=setTimeout(t,l.remaining)),l.remaining=null),o;if("reset"===e)return r(),o;if("getRemainingTime"===e)return function(){var e=c.data(n,"idleTimerObj")||{};if(e.idle)return 0;if(null!=e.remaining)return e.remaining;e=e.timeout-(+new Date-e.lastActive);return e=e<0?0:e}();if("getElapsedTime"===e)return+new Date-m.olddate;if("getLastActiveTime"===e)return m.lastActive;if("isIdle"===e)return m.idle}return o.on(c.trim((u.events+" ").split(" ").join("._idleTimer ")),function(e){i(e)}),u.timerSyncId&&c(window).bind("storage",i),(m=c.extend({},{olddate:+new Date,lastActive:+new Date,idle:u.idle,idleBackup:u.idle,timeout:u.timeout,remaining:null,timerSyncId:u.timerSyncId,tId:null,pageX:null,pageY:null})).idle||(m.tId=setTimeout(t,m.timeout)),c.data(n,"idleTimerObj",m),o},c.fn.idleTimer=function(e){return this[0]?c.idleTimer(e,this[0]):this}}(jQuery);